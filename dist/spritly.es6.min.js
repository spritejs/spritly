module.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=14)}([function(t,e){t.exports=require("Blockly")},function(t,e,n){const i=n(0),{Msg:o}=i;o.SPRITE_HUE=330,o.ATTRS_HUE=130,o.ATTRS_SPRITE_HUE=140,o.ATTRS_LABEL_HUE=150,o.ATTRS_PATH_HUE=160,o.EASING_HUE=90,o.ANIMATE_HUE=345,o.SIGNALS_HUE=55,o.LITERAL_HUE=250,o.GETTER_SETTER_HUE=120,o.STORE_HUE=70,o.FLOWS_HUE=220,o.MATH_HUE=270,o.LOG_HUE=310,o.SOUND_HUE=45,o.PROCEDURE_HUE=290},function(t,e,n){const i=n(0),{Msg:o}=i;o.COMMON_FGLAYER="å‰æ™¯å›¾å±‚",o.COMMON_BGLAYER="èƒŒæ™¯å›¾å±‚",o.COMMON_TARGET="ç›®æ ‡å…ƒç´ ",o.COMMON_SENDER="å‘é€è€…",o.COMMON_RECEIVER="æŽ¥æ”¶è€…",o.COMMON_SPRITE="ç²¾çµå…ƒç´ ",o.COMMON_LABEL="æ–‡æœ¬å…ƒç´ ",o.COMMON_PATH="çŸ¢é‡å…ƒç´ ",o.CATEGORY_SIGNALS="ä¿¡å·",o.CATEGORY_PROCEDURE="è¿‡ç¨‹",o.CATEGORY_SPRITES="å…ƒç´ å¯¹è±¡",o.CATEGORY_ATTRIBUTES="å…ƒç´ å±žæ€§",o.CATEGORY_ATTRIBUTES_COMMON="å…¬å…±å±žæ€§",o.CATEGORY_ATTRIBUTES_SPRITE="ç²¾çµå±žæ€§",o.CATEGORY_ATTRIBUTES_LABEL="æ–‡æœ¬å±žæ€§",o.CATEGORY_ATTRIBUTES_PATH="çŸ¢é‡å±žæ€§",o.CATEGORY_ANIM_ASYNC="åŠ¨ç”»å’Œå¼‚æ­¥",o.CATEGORY_GETTER_SETTER="å±žæ€§è¯»å†™",o.CATEGORY_STORE="å…±äº«æ•°æ®",o.CATEGORY_LITERALS="å­—é¢é‡",o.CATEGORY_LISTS="åˆ—è¡¨å¯¹è±¡",o.CATEGORY_MATH="æ•°å­¦è®¡ç®—",o.CATEGORY_LOGIC="é€»è¾‘åˆ¤æ–­",o.CATEGORY_FLOWS="å¾ªçŽ¯å’Œæ¡ä»¶",o.CATEGORY_LOG="æ—¥å¿—è¾“å‡º",o.CATEGORY_SOUND="éŸ³æ•ˆ",o.SENDER_RECEIVER_TARGET_TOOLTIP="å‘é€è€…ï¼šå‘é€ä¿¡å·çš„å…ƒç´ ã€‚\næŽ¥æ”¶è€…ï¼šæŽ¥æ”¶ä¿¡å·çš„å…ƒç´ ã€‚\nç›®æ ‡å…ƒç´ ï¼šå¦‚æžœä¿¡å·ç”±äº‹ä»¶è§¦å‘ï¼Œç›®æ ‡å…ƒç´ æ˜¯å®žé™…äº‹ä»¶ç›®æ ‡ã€‚",o.FGLAYER_BGLAYER_TOOTIP="å‰æ™¯å›¾å±‚æŽ¥æ”¶DOMäº‹ä»¶ï¼Œ\nèƒŒæ™¯å›¾å±‚ä¸æŽ¥æ”¶DOMäº‹ä»¶ã€‚",o.LITERAL_NULL="ç©º",o.LITERAL_UNDEFINED="æœªå®šä¹‰",o.NIL_TOOLTIP="%1å€¼ã€‚",o.OBJECT_CREATE_TOOLTIP="æž„é€ ä¸€ä¸ªå¯¹è±¡ã€‚",o.LOOP_GET_INDEX_MSG0="ç´¢å¼•å€¼",o.LOOP_GET_INDEX_TOOLTIP="å¾ªçŽ¯ä¸­çš„ç´¢å¼•å€¼ã€‚",o.ATTR_ID="ID",o.ATTR_NAME="åå­—",o.ATTR_ANCHORX="Xå‘é”š",o.ATTR_ANCHORY="Yå‘é”š",o.ATTR_X="Xåæ ‡",o.ATTR_Y="Yåæ ‡",o.ATTR_WIDTH="å®½",o.ATTR_HEIGHT="é«˜",o.ATTR_BGCOLOR="èƒŒæ™¯è‰²",o.ATTR_OPACITY="é€æ˜Žåº¦",o.ATTR_SCALEX="Xå‘æ‹‰ä¼¸",o.ATTR_SCALEY="Yå‘æ‹‰ä¼¸",o.ATTR_TRANSLATEX="Xå‘å¹³ç§»",o.ATTR_TRANSLATEY="Yå‘å¹³ç§»",o.ATTR_SKEWX="Xå‘æ‰­æ›²",o.ATTR_SKEWY="Yå‘æ‰­æ›²",o.ATTR_ROTATE="é€†æ—¶é’ˆæ—‹è½¬",o.ATTR_BORDERRADIUS="åœ†è§’åŠå¾„",o.ATTR_BORDERWIDTH="è¾¹æ¡†çº¿å®½",o.ATTR_BORDERSTYLE="è¾¹æ¡†æ ·å¼",o.ATTR_BORDERCOLOR="è¾¹æ¡†é¢œè‰²",o.ATTR_DASHOFFSET="è™šçº¿æ¡†åç§»",o.ATTR_TEXTURE="å›¾ç‰‡çº¹ç†",o.ATTR_TEXT="æ–‡æœ¬",o.ATTR_FONTSIZE="å­—å·",o.ATTR_FONTFAMILY="å­—ä½“",o.ATTR_FONTSTYLE="å­—ä½“æ ·å¼",o.ATTR_FONTVARIANT="å­—ä½“å˜ä½“",o.ATTR_FONTWEIGHT="å­—ä½“ç²—ç»†",o.ATTR_TEXTALIGN="æ–‡æœ¬å¯¹é½",o.ATTR_LINEHEIGHT="æ–‡æœ¬è¡Œé«˜",o.ATTR_D="SVGè·¯å¾„",o.ATTR_LINEWIDTH="è·¯å¾„çº¿å®½",o.ATTR_LINEDASH="è·¯å¾„è™šçº¿æ ·å¼",o.ATTR_LINEDASHOFFSET="è·¯å¾„è™šçº¿åç§»",o.ATTR_LINECAP="çº¿å¸½æ ·å¼",o.ATTR_LINEJOIN="è¿žçº¿æ ·å¼",o.ATTR_BOUNDING="ç¢°æ’žè¾¹ç•Œ",o.ATTR_STROKECOLOR="æçº¿é¢œè‰²",o.ATTR_FILLCOLOR="å¡«å……é¢œè‰²",o.ATTR_CURSOR="é¼ æ ‡æ ·å¼",o.ATTR_DRAGGABLE="å¯æ‹–æ‹½ï¼Ÿ",o.ATTR_VALUE_YES="æ˜¯",o.ATTR_VALUE_NO="å¦",o.ATTR_VALUE_SOLID="å®žçº¿",o.ATTR_VALUE_DASHED="è™šçº¿",o.ATTR_VALUE_NORMAL="å¸¸è§„",o.ATTR_VALUE_BOLD="ç²—ä½“",o.ATTR_VALUE_LIGHTER="ç»†ä½“",o.ATTR_VALUE_ITALIC="æ–œä½“",o.ATTR_VALUE_OBLIQUE="å€¾æ–œ",o["ATTR_VALUE_SMALL-CAPS"]="å°åž‹å¤§å†™",o.ATTR_VALUE_LEFT="é å·¦",o.ATTR_VALUE_RIGHT="é å³",o.ATTR_VALUE_CENTER="å±…ä¸­",o.ATTR_VALUE_BUTT="å¹³ç›´",o.ATTR_VALUE_ROUND="åœ†å½¢",o.ATTR_VALUE_SQUARE="æ–¹å½¢",o.ATTR_VALUE_MITER="å°–è§’",o.ATTR_VALUE_BEVEL="æ–œè§’",o.ATTR_VALUE_BOX="åŸºäºŽç›’å­",o.ATTR_VALUE_PATH="åŸºäºŽè·¯å¾„",o.ATTR_VALUE_DEFAULT="é»˜è®¤",o.ATTR_VALUE_CROSSHAIR="åå­—çº¿",o.ATTR_VALUE_POINTER="æ‰‹å½¢",o.ATTR_VALUE_MOVE="å¯è¢«ç§»åŠ¨",o["ATTR_VALUE_E-RESIZE"]="å¯å³ç§»",o["ATTR_VALUE_NE-RESIZE"]="å¯å³ä¸Šç§»",o["ATTR_VALUE_SE-RESIZE"]="å¯å³ä¸‹ç§»",o["ATTR_VALUE_W-RESIZE"]="å¯å·¦ç§»",o["ATTR_VALUE_NW-RESIZE"]="å¯å·¦ä¸Šç§»",o["ATTR_VALUE_SW-RESIZE"]="å¯å·¦ä¸‹ç§»",o["ATTR_VALUE_N-RESIZE"]="å¯ä¸Šç§»",o["ATTR_VALUE_S-RESIZE"]="å¯ä¸‹ç§»",o.ATTR_VALUE_TEXT="æ–‡æœ¬",o.ATTR_VALUE_WAIT="ç­‰å¾…",o.ATTR_VALUE_HELP="å¸®åŠ©",o.AWAIT_MSG0="ç­‰å¾… %1 æ¯«ç§’ ðŸ•™",o.AWAIT_TOOLTIP="ç­‰å¾… %1 æ¯«ç§’åŽç»§ç»­æ‰§è¡ŒåŽç»­æ“ä½œã€‚",o.AWAIT_FRAME_MSG0="ç­‰å¾… %1 æ›´æ–°åˆ°ä¸‹ä¸€å¸§ âŒ›",o.AWAIT_FRAME_TOOLTIP="ç­‰å¾…å›¾å±‚æ›´æ–°åŽç»§ç»­æ‰§è¡ŒåŽç»­æ“ä½œã€‚",o.SPRITE_ANIMATE_MSG0="%1 %2 åŠ¨ç”»æŒç»­ %3 ç§’",o.SPRITE_ANIMATE_MSG1="èµ·å§‹çŠ¶æ€ %1",o.SPRITE_ANIMATE_MSG2="ç»“æŸçŠ¶æ€ %1",o.SPRITE_ANIMATE_MSG3="ç¼“åŠ¨ç­–ç•¥ %1",o.SPRITE_ANIMATE_TOOLTIP="åœ¨æŒ‡å®šå…ƒç´ ä¸Šæ‰§è¡ŒåŠ¨ç”»æ“ä½œã€‚",o.SPRITE_ANIMATE_OPTION_ASYNC_DEFAULT="âš¡ï¸ ç«‹å³æ‰§è¡Œ",o.SPRITE_ANIMATE_OPTION_ASYNC_AWAIT="âŒ›ï¸ æ‰§è¡Œå¹¶ç­‰å¾…",o.EASING_MSG0="%1",o.EASING_OPTION_EASING_EASE="åŒ€é€Ÿ",o.EASING_OPTION_EASING_EASEIN="åŒ€åŠ é€Ÿ",o.EASING_OPTION_EASING_EASEOUT="åŒ€å‡é€Ÿ",o.EASING_OPTION_EASING_EASEINOUT="å…ˆåŠ é€ŸåŽå‡é€Ÿ",o.EASING_OPTION_TOOLTIP="ä¸ºåŠ¨ç”»è®¾ç½®ç¼“åŠ¨ç­–ç•¥ã€‚",o.BEZIER_EASING_MSG0="è´å¡žå°”æ›²çº¿ %1 %2 %3 %4",o.BEZIER_EASING_TOOLTIP="å°†åŠ¨ç”»ç¼“åŠ¨ç­–ç•¥è®¾ç½®ä¸ºè´å¡žå°”æ›²çº¿ã€‚",o.FIELD_ATTR_INC_MSG0="%1 %2",o.FIELD_ATTR_INC_TOOLTIP="åœ¨åŽŸå€¼åŸºç¡€ä¸Šæ”¹å˜å±žæ€§å€¼ã€‚",o.KEYVALUE_MSG0="%1: %2,",o.KEYVALUE_TOOLTIP="è®¾ç½®â€œå±žæ€§-å€¼â€å¯¹ã€‚",o.FIELD_ATTR_ANCHOR_TOOLTIP="è®¾ç½®å…ƒç´ çš„%1ã€‚",o.FIELD_ATTR_XY_TOOLTIP="è®¾ç½®å…ƒç´ çš„%1ã€‚",o.FIELD_ATTR_SIZE_TOOLTIP="è®¾ç½®å…ƒç´ çš„%1ã€‚",o.FIELD_ATTR_BGCOLOR_TOOLTIP="è®¾ç½®å…ƒç´ çš„èƒŒæ™¯è‰²ã€‚",o.FIELD_ATTR_OPACITY_TOOLTIP="è®¾ç½®å…ƒç´ çš„é€æ˜Žåº¦ã€‚",o.FIELD_ATTR_ROTATE_TOOLTIP="è®¾ç½®å…ƒç´ çš„é€†æ—¶é’ˆæ—‹è½¬è§’åº¦ã€‚",o.FIELD_ATTR_SCALE_TOOLTIP="è®¾ç½®å…ƒç´ çš„%1ã€‚",o.FIELD_ATTR_TRANSLATE_TOOLTIP="è®¾ç½®å…ƒç´ çš„%1ã€‚",o.FIELD_ATTR_SKEW_TOOLTIP="è®¾ç½®å…ƒç´ çš„%1ã€‚",o.FIELD_ATTR_BORDERRADIUS_TOOLTIP="è®¾ç½®å…ƒç´ çš„åœ†è§’åŠå¾„ã€‚",o.FIELD_ATTR_BORDERWIDTH_TOOLTIP="è®¾ç½®å…ƒç´ çš„è¾¹æ¡†å®½åº¦ã€‚",o.FIELD_ATTR_BORDERSTYLE_TOOLTIP="è®¾ç½®å…ƒç´ çš„è¾¹æ¡†æ ·å¼ã€‚",o.FIELD_ATTR_BORDERCOLOR_TOOLTIP="è®¾ç½®å…ƒç´ çš„è¾¹æ¡†é¢œè‰²ã€‚",o.FIELD_ATTR_DASHOFFSET_TOOLTIP="å¦‚æžœå…ƒç´ è¾¹æ¡†æ ·å¼ä¸ºè™šçº¿ï¼Œè®¾ç½®è¾¹æ¡†è™šçº¿çš„åç§»é‡ã€‚",o.FIELD_ATTR_TEXTURE_TOOLTIP="è®¾ç½®ç²¾çµå…ƒç´ çš„å›¾ç‰‡çº¹ç†ã€‚",o.FIELD_ATTR_TEXT_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„å†…å®¹ã€‚",o.FIELD_ATTR_FONTSIZE_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„å­—å·ã€‚",o.FIELD_ATTR_FONTFAMILY_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„å­—ä½“ã€‚",o.FIELD_ATTR_FONTSTYLE_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„å­—ä½“æ ·å¼ã€‚",o.FIELD_ATTR_FONTVARIANT_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„å­—ä½“å˜ä½“ã€‚",o.FIELD_ATTR_FONTWEIGHT_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„å­—ä½“ç²—ç»†ã€‚",o.FIELD_ATTR_TEXTALIGN_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„æ–‡å­—å¯¹é½æ–¹å¼ã€‚",o.FIELD_ATTR_LINEHEIGHT_TOOLTIP="è®¾ç½®æ–‡æœ¬å…ƒç´ çš„è¡Œé«˜ã€‚",o.FIELD_ATTR_D_TOOLTIP="è®¾ç½®çŸ¢é‡å…ƒç´ çš„SVGè·¯å¾„ã€‚",o.FIELD_ATTR_LINEWIDTH_TOOLTIP="è®¾ç½®çŸ¢é‡å…ƒç´ çš„çº¿å®½ã€‚",o.FIELD_ATTR_LINEDASH_TOOLTIP="å°†çŸ¢é‡å…ƒç´ çš„æçº¿è®¾ä¸ºè™šçº¿ã€‚",o.FIELD_ATTR_LINEDASHOFFSET_TOOLTIP="å¦‚æžœçŸ¢é‡å…ƒç´ çš„æçº¿æ˜¯è™šçº¿ï¼Œè®¾ç½®è™šçº¿åç§»é‡ã€‚",o.FIELD_ATTR_LINECAP_TOOLTIP="è®¾ç½®çŸ¢é‡å…ƒç´ çš„çº¿å¸½æ ·å¼ã€‚",o.FIELD_ATTR_LINEJOIN_TOOLTIP="è®¾ç½®çŸ¢é‡å…ƒç´ çš„è¿žçº¿æ ·å¼ã€‚",o.FIELD_ATTR_BOUNDING_TOOLTIP="ä½¿ç”¨%1çš„è¾¹ç•Œæ–¹å¼æ¥æ£€æµ‹ç¢°æ’žã€‚",o.FIELD_ATTR_STROKECOLOR_TOOLTIP="è®¾ç½®ä¸€ä¸ªçŸ¢é‡å…ƒç´ æˆ–æ–‡æœ¬å…ƒç´ çš„æçº¿é¢œè‰²ã€‚",o.FIELD_ATTR_FILLCOLOR_TOOLTIP="è®¾ç½®ä¸€ä¸ªçŸ¢é‡å…ƒç´ æˆ–æ–‡æœ¬å…ƒç´ çš„å¡«å……é¢œè‰²ã€‚",o.FIELD_ATTR_CURSOR_TOOLTIP="è®¾ç½®å…‰æ ‡å½¢çŠ¶ã€‚",o.FIELD_ATTR_DRAGGABLE_TOOLTIP="å¯æ‹–æ‹½ï¼Ÿ",o.RANDOM_STRING_MSG0="ðŸŽ² éšæœºå­—ç¬¦ä¸²",o.RANDOM_STRING_TOOLTIP="èŽ·å¾—ä¸€ä¸ª11ä¸ªå­—ç¬¦é•¿åº¦çš„éšæœºå­—ç¬¦ä¸²ã€‚",o.RANDOM_COLOUR_RGB_MSG0="ðŸŽ² éšæœºé¢œè‰²",o.RANDOM_COLOUR_RGB_TOOLTIP="èŽ·å¾—ä¸€ä¸ªéšæœºçš„RGBé¢œè‰²ã€‚",o.RANDOM_COLOUR_HUE_MSG0="ðŸŽ² éšæœºè‰²è°ƒ",o.RANDOM_COLOUR_HUE_MSG1="é¥±å’Œ %1% äº® %2% é€æ˜Ž %3.",o.RANDOM_COLOUR_HUE_TOOLTIP="èŽ·å¾—ä¸€ä¸ªéšæœºçš„HSLAé¢œè‰²ã€‚",o.LOG_OPTION_LOG_LOG="è®°å½•",o.LOG_OPTION_LOG_WARN="è­¦å‘Š",o.LOG_OPTION_LOG_ERROR="é”™è¯¯",o.LOG_TOOLTIP="è¾“å‡ºä¿¡æ¯åˆ°æŽ§åˆ¶å°ã€‚",o.LOG_ALERT_MSG0="ðŸ”” å¼¹å‡º %1",o.LOG_ALERT_TOOLTIP="å¼¹å‡ºä¸€ä¸ªä¼šè¯æ¡†ã€‚",o.SIGNAL_DO_MSG0="å½“æ”¶åˆ°ä¿¡å·ä¸º %1 ðŸš© æ‰§è¡Œ",o.SIGNAL_DO_TOOLTIP="å½“æ”¶åˆ°æŒ‡å®šä¿¡å·æ—¶ï¼Œæ‰§è¡ŒåŠ¨ä½œã€‚",o.SIGNAL_DO_OPTION_SIGNAL_START="å¼€å§‹è¿è¡Œ",o.SIGNAL_DO_OPTION_SIGNAL_STORE_PROPERTY_UPDATE="å…±äº«æ•°æ®å†…å®¹æ›´æ–°",o.SIGNAL_DO_OPTION_SIGNAL_LAYER_CLICKED="å‰æ™¯å›¾å±‚è¢«é¼ æ ‡ç‚¹å‡»",o.SIGNAL_DO_OPTION_SIGNAL_KEYDOWN="é”®ç›˜æŒ‰é”®æŒ‰ä¸‹",o.SIGNAL_DO_OPTION_SIGNAL_KEYUP="é”®ç›˜æŒ‰é”®æ¾å¼€",o.SIGNAL_DO_OPTION_SIGNAL_ELEMENT_CREATED="å…ƒç´ è¢«åˆ›å»º",o.SIGNAL_DO_OPTION_SIGNAL_ELEMENT_DESTROYED="å…ƒç´ è¢«é”€æ¯",o.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG0="æ”¶åˆ°ä¿¡å·ä¸º %1 ðŸš© æ—¶",o.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG1="åˆ›å»º %1 ä½œä¸ºæŽ¥æ”¶è€…",o.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG2="IDè®¾ä¸º %1",o.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP="æ”¶åˆ°æŸä¸ªä¿¡å·æ—¶ï¼Œæ–°å»ºä¸€ä¸ªå…ƒç´ ä½œä¸ºæŽ¥æ”¶è€…å¹¶æ‰§è¡ŒåŠ¨ä½œã€‚",o.SIGNAL_WHEN_RECEIVER_IS_MSG0="æ”¶åˆ°ä¿¡å· %1 ðŸš©",o.SIGNAL_WHEN_RECEIVER_IS_MSG1="å½“æŽ¥æ”¶è€…ä¸º %1 æ—¶",o.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP="æ”¶åˆ°æŸä¸ªä¿¡å·ä¸”æŽ¥æ”¶è€…ä¸ºç‰¹å®šå…ƒç´ æ—¶ï¼Œæ‰§è¡ŒåŠ¨ä½œã€‚",o.GET_DATA_MSG0="æ¶ˆæ¯",o.GET_DATA_TOOLTIP="è¯»å–ä¿¡å·æ¶ˆæ¯ã€‚",o.GET_DATA_PROP_MSG0="æ¶ˆæ¯çš„ %1",o.GET_DATA_PROP_TOOLTIP="è¯»å–ä¿¡å·çš„æ•°æ®å±žæ€§ã€‚å¦‚æžœä¿¡å·æ˜¯ç”±äº‹ä»¶è§¦å‘ï¼Œå¯è¯»å–è¿™äº›å±žæ€§ã€‚",o.GET_DATA_PROP_TOOLTIP2="è¯»å–ä¿¡å·çš„æ•°æ®å±žæ€§ã€‚å¦‚æžœä¿¡å·æ˜¯å­˜å‚¨æ•°æ®æ”¹å˜ï¼Œå¯è¯»å–è¿™äº›å±žæ€§ã€‚",o.GET_DATA_PROP_OPTION_PROP_OFFSETX="ç›¸å¯¹åæ ‡X",o.GET_DATA_PROP_OPTION_PROP_OFFSETY="ç›¸å¯¹åæ ‡Y",o.GET_DATA_PROP_OPTION_PROP_LAYERX="ç»å¯¹åæ ‡X",o.GET_DATA_PROP_OPTION_PROP_LAYERY="ç»å¯¹åæ ‡Y",o.GET_DATA_PROP_OPTION_PROP_ALTKEY="æŒ‰ä¸‹ALTé”®",o.GET_DATA_PROP_OPTION_PROP_CTRLKEY="æŒ‰ä¸‹CTRLé”®",o.GET_DATA_PROP_OPTION_PROP_SHIFTKEY="æŒ‰ä¸‹SHIFTé”®",o.GET_DATA_PROP_OPTION_PROP_BUTTONS="é¼ æ ‡æŒ‰é”®å€¼",o.GET_DATA_PROP_OPTION_PROP_KEY="é”®ç›˜æŒ‰é”®å€¼",o.GET_DATA_PROP_OPTION_PROP_KEYCODE="é”®ç›˜æŒ‰é”®å€¼ç¼–ç ",o.GET_DATA_PROP_OPTION_PROP_PROPERTY="æ›´æ–°çš„å­˜å‚¨å±žæ€§",o.GET_DATA_PROP_OPTION_PROP_OLDVALUE="å±žæ€§åŽŸå€¼",o.GET_DATA_PROP_OPTION_PROP_NEWVALUE="å±žæ€§æ–°å€¼",o.EVENT_IMMEDIATELY="ç«‹å³",o.EVENT_ONCLICK="è¢«å•å‡»",o.EVENT_ONDBLCLICK="è¢«åŒå‡»",o.EVENT_ONMOUSEDOWN="æŒ‰ä¸‹é¼ æ ‡æŒ‰é”®",o.EVENT_ONMOUSEMOVE="é¼ æ ‡åœ¨å®ƒå†…éƒ¨ç§»åŠ¨",o.EVENT_ONMOUSEUP="é‡Šæ”¾é¼ æ ‡æŒ‰é”®",o.EVENT_ONMOUSEENTER="é¼ æ ‡è¿›å…¥å®ƒ",o.EVENT_ONMOUSELEAVE="é¼ æ ‡ç¦»å¼€å®ƒ",o.EVENT_ONTAP="è§¦å±çŸ­æŒ‰",o.EVENT_ONLONGTAP="è§¦å±é•¿æŒ‰",o.EVENT_ONDRAGGED="è¢«æ‹–æ‹½",o.EVENT_ONDRAGGEDONTO="å…¶å®ƒå…ƒç´ æ‹–æ‹½å…¥",o.EVENT_ONCOLLISION="ä¸Žå…¶ä»–å…ƒç´ ç¢°æ’ž",o.SIGNAL_ONEVENT_SEND_MSG0="%1 %2 å‘é€ %3 ðŸš©",o.SIGNAL_ONEVENT_SEND_MSG1="åŒ…å«æ¶ˆæ¯ %1",o.SIGNAL_ONEVENT_SEND_TOOLTIP="å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå‘é€ä¿¡å·ã€‚",o.SPRITE_MSG0_TOOLTIP=`æŒ‡å®šå…ƒç´ ã€‚\n${o.SENDER_RECEIVER_TARGET_TOOLTIP}`,o.SPRITE_APPEND_TO_MSG0="å°† %1 æ·»åŠ åˆ° %2",o.SPRITE_APPEND_TO_TOOLTIP="æ·»åŠ å…ƒç´ åˆ°å±‚ã€‚",o.SPRITE_ATTRS_MSG0="è®¾ç½® %1 å±žæ€§",o.SPRITE_ATTRS_TOOLTIP="è®¾ç½®å±žæ€§å€¼åˆ°å…ƒç´ ã€‚",o.SPRITE_CREATE_ATTRS_MSG0="åˆ›å»º %1",o.SPRITE_CREATE_ATTRS_MSG1="å‘½åä¸º %1 åŒ…å«å±žæ€§",o.SPRITE_CREATE_ATTRS_TOOLTIP="åˆ›å»ºä¸€ä¸ªæŒ‡å®šåå­—çš„å…ƒç´ ã€‚å¯ä»¥ä½¿ç”¨å¾ªçŽ¯è¯­å¥åˆ›å»ºå¤šä¸ªåŒåå…ƒç´ ã€‚",o.SPRITE_EACH_ELEMENTS_NAMED_MSG0="æ‰€æœ‰åä¸º %1 çš„å…ƒç´ ",o.SPRITE_EACH_ELEMENTS_NAMED_TOOLTIP="èŽ·å¾—æŒ‡å®šåå­—çš„å…¨éƒ¨å…ƒç´ ã€‚",o.SPRITE_DESTROY_MSG0="ðŸ’£ é”€æ¯ %1",o.SPRITE_DESTROY_TOOLTIP="å°†å…ƒç´ ç§»é™¤å±‚å¹¶é”€æ¯ã€‚",o.SPRITE_GET_ATTR_MSG0="%1 çš„ %2",o.SPRITE_GET_ATTR_TOOLTIP="è¯»å–ç›®æ ‡å…ƒç´ çš„å±žæ€§å€¼ã€‚",o.MATH_RANDOM_INT_TITLE=`ðŸŽ² ${o.MATH_RANDOM_INT_TITLE}`,o.MATH_RANDOM_FLOAT_TITLE_RANDOM=`ðŸŽ² ${o.MATH_RANDOM_FLOAT_TITLE_RANDOM}`,o.LIST_FOREACH_MSG0="éåŽ†åˆ—è¡¨ %1:",o.LIST_FOREACH_MSG1="æ‰§è¡Œ %1",o.LIST_FOREACH_MSG2="%1 ä»£è¡¨æ¯ä¸ªå…ƒç´ , %2 ä»£è¡¨ç´¢å¼•",o.LIST_FOREACH_TOOLTIP="éåŽ†åˆ—è¡¨æ¯ä¸ªå…ƒç´ ï¼Œæ‰§è¡ŒåŠ¨ä½œã€‚",o.LIST_INDEX_TOOLTIP="èŽ·å–è¿­ä»£ç´¢å¼•ã€‚",o.LIST_ITEM_TOOLTIP="èŽ·å–è¿­ä»£å…ƒç´ ã€‚",o.OBJECT_GET_PROP_MSG0="%1.%2",o.OBJECT_GET_PROP_TOOLTIP="è¯»å–å¯¹è±¡å±žæ€§ã€‚",o.LISTS_CREATE_RANGE_MSG0="åˆ›å»ºåˆ—è¡¨èŒƒå›´",o.LISTS_CREATE_RANGE_MSG1="ä»Ž %1 åˆ° %2",o.LISTS_CREATE_RANGE_TOOLTIP="é€šè¿‡æ•´æ•°èŒƒå›´åˆ›å»ºåˆ—è¡¨ã€‚",o.STORE_SET_MSG0="ðŸ“ è®¾ç½® %1 çš„å€¼ä¸º %2",o.STORE_SET_TOOLTIP="è®¾ç½®å…±äº«æ•°æ®çš„å€¼ã€‚",o.STORE_GET_MSG0="ðŸ“ èŽ·å– %1 çš„å€¼",o.STORE_GET_TOOLTIP="èŽ·å–å…±äº«æ•°æ®çš„å€¼ã€‚",o.STORE_DELETE_MSG0="âœ‚ï¸ åˆ é™¤ %1 çš„å€¼",o.STORE_DELETE_TOOLTIP="åˆ é™¤å…±äº«æ•°æ®çš„å€¼ã€‚",o.FIELD_ATTR_TEXTUREFRAME_MSG0="åŠ¨ç”»å¸§ %1",o.FIELD_ATTR_TEXTUREFRAME_MSG1="æŒç»­æ—¶é—´ %1ç§’",o.FIELD_ATTR_TEXTUREFRAME_TOOLTIP="åœ¨å…ƒç´ ä¸Šè®¾ç½®åŠ¨ç”»å¸§ï¼ŒåŠ¨ç”»å¸§ä¼šè‡ªåŠ¨å¾ªçŽ¯æ’­æ”¾ã€‚",o.SOUND_PLAY_MSG0="ðŸ”” %1",o.SOUND_PLAY_TOOLTIP="æ’­æ”¾å£°éŸ³ã€‚",o.PROCEDURES_DEFRETURN_TITLE="å®šä¹‰ï¼š",o.PROCEDURES_DEFNORETURN_DO="æ‰§è¡Œ",o.PROCEDURES_MUTATORARG_TITLE="å‚æ•°åç§°",o.PROCEDURES_BEFORE_PARAMS="å‚æ•°ï¼š",o.PROCEDURES_CALL_BEFORE_PARAMS="ä»¤ï¼š",o.PROCEDURES_AWAIT_MSG0="âŒ›ï¸ å¾—åˆ°å¼‚æ­¥æ‰§è¡Œç»“æžœ %1",o.PROCEDURES_AWAIT_TOOLTIP="ç­‰å¾…ç›´åˆ°å¾—åˆ°å¼‚æ­¥æ‰§è¡Œç»“æžœã€‚",o.SPRITE_DELETED="è¯¥å…ƒç´ å·²è¢«åˆ é™¤ã€‚"},function(t,e,n){const i=n(0),o=i.Msg;function r(t="key",e="",n=i.Msg.ATTRS_HUE,r="KeyValue"){const _={name:"KEY",type:"field_dropdown"},a={type:"input_value",name:"VALUE",check:e};return"string"==typeof t&&(t=[t]),Array.isArray(t)?_.options=t.map(t=>[o.$(t,"ATTR"),t]):"string"!=typeof t&&t.prop&&t.options&&(_.options=[[o.$(t.prop,"ATTR"),t.prop]],a.type="field_dropdown",a.options=t.options.map(t=>[o.$(t,"ATTR_VALUE"),t])),{message0:o.KEYVALUE_MSG0,args0:[_,a],colour:n,previousStatement:r,nextStatement:r}}function _(t){return`\n'${t.getFieldValue("KEY")}': ${i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_NONE)||`'${t.getFieldValue("VALUE")}'`||"null"},`}i.Blocks.field_attr_inc={init(){this.jsonInit({message0:o.FIELD_ATTR_INC_MSG0,args0:[{type:"field_dropdown",name:"OP",options:[["+","+"],["-","-"],["*","*"],["/","/"],["^","**"]]},{type:"input_value",name:"VALUE",check:"Number"}],colour:i.Msg.ATTRS_HUE,tooltip:o.FIELD_ATTR_INC_TOOLTIP}),this.setOutput(!0,"Number")}},i.JavaScript.field_attr_inc=function(t){return[`v => v ${t.getFieldValue("OP")} ${i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_NONE)||0}`,i.JavaScript.ORDER_NONE]},i.Blocks.field_attr_anchor={init(){this.jsonInit(r(["anchorX","anchorY"],"Number")),this.setTooltip(()=>o.FIELD_ATTR_ANCHOR_TOOLTIP.replace("%1",o.$(this.getFieldValue("KEY"),"ATTR")))}},i.Blocks.field_attr_xy={init(){this.jsonInit(r(["x","y"],"Number")),this.setTooltip(()=>o.FIELD_ATTR_XY_TOOLTIP.replace("%1",o.$(this.getFieldValue("KEY"),"ATTR")))}},i.Blocks.field_attr_size={init(){this.jsonInit(r(["width","height"],"Number")),this.setTooltip(()=>o.FIELD_ATTR_SIZE_TOOLTIP.replace("%1",o.$(this.getFieldValue("KEY"),"ATTR")))}},i.Blocks.field_attr_bgcolor={init(){this.jsonInit(r("bgcolor","Colour")),this.setTooltip(o.FIELD_ATTR_BGCOLOR_TOOLTIP)}},i.Blocks.field_attr_opacity={init(){this.jsonInit(r("opacity","Number")),this.setTooltip(o.FIELD_ATTR_OPACITY_TOOLTIP)}},i.Blocks.field_attr_rotate={init(){this.jsonInit(r("rotate","Number")),this.setTooltip(o.FIELD_ATTR_ROTATE_TOOLTIP)}},i.Blocks.field_attr_scale={init(){this.jsonInit(r(["scaleX","scaleY"],"Number")),this.setTooltip(()=>o.FIELD_ATTR_SCALE_TOOLTIP.replace("%1",o.$(this.getFieldValue("KEY"),"ATTR")))}},i.Blocks.field_attr_translate={init(){this.jsonInit(r(["translateX","translateY"],"Number")),this.setTooltip(()=>o.FIELD_ATTR_TRANSLATE_TOOLTIP.replace("%1",o.$(this.getFieldValue("KEY"),"ATTR")))}},i.Blocks.field_attr_skew={init(){this.jsonInit(r(["skewX","skewY"],"Number")),this.setTooltip(()=>o.FIELD_ATTR_SKEW_TOOLTIP.replace("%1",o.$(this.getFieldValue("KEY"),"ATTR")))}},i.Blocks.field_attr_borderRadius={init(){this.jsonInit(r("borderRadius","Number")),this.setTooltip(o.FIELD_ATTR_BORDERRADIUS_TOOLTIP)}},i.Blocks.field_attr_borderWidth={init(){this.jsonInit(r("borderWidth","Number")),this.setTooltip(o.FIELD_ATTR_BORDERWIDTH_TOOLTIP)}},i.Blocks.field_attr_borderStyle={init(){this.jsonInit(r({prop:"borderStyle",options:["solid","dashed"]},"String")),this.setTooltip(o.FIELD_ATTR_BORDERSTYLE_TOOLTIP)}},i.Blocks.field_attr_borderColour={init(){this.jsonInit(r("borderColor","Colour")),this.setTooltip(o.FIELD_ATTR_BORDERCOLOR_TOOLTIP)}},i.Blocks.field_attr_dashOffset={init(){this.jsonInit(r("dashOffset","Number")),this.setTooltip(o.FIELD_ATTR_DASHOFFSET_TOOLTIP)}},i.Blocks.field_attr_texture={init(){this.jsonInit(r("texture","String",i.Msg.ATTRS_SPRITE_HUE)),this.setTooltip(o.FIELD_ATTR_TEXTURE_TOOLTIP)}},i.Blocks.field_attr_text={init(){this.jsonInit(r("text","String",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_TEXT_TOOLTIP)}},i.Blocks.field_attr_fontSize={init(){this.jsonInit(r("fontSize","Number",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_FONTSIZE_TOOLTIP)}},i.Blocks.field_attr_fontFamily={init(){this.jsonInit(r("fontFamily","String",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_FONTFAMILY_TOOLTIP)}},i.Blocks.field_attr_fontStyle={init(){this.jsonInit(r({prop:"fontStyle",options:["normal","italic","oblique"]},"String",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_FONTSTYLE_TOOLTIP)}},i.Blocks.field_attr_fontVariant={init(){this.jsonInit(r({prop:"fontVariant",options:["normal","small-caps"]},"String",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_FONTVARIANT_TOOLTIP)}},i.Blocks.field_attr_fontWeight={init(){this.jsonInit(r({prop:"fontWeight",options:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},"String",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_FONTWEIGHT_TOOLTIP)}},i.Blocks.field_attr_textAlign={init(){this.jsonInit(r({prop:"textAlign",options:["left","right","center"]},"String",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_TEXTALIGN_TOOLTIP)}},i.Blocks.field_attr_lineHeight={init(){this.jsonInit(r("lineHeight","Number",i.Msg.ATTRS_LABEL_HUE)),this.setTooltip(o.FIELD_ATTR_LINEHEIGHT_TOOLTIP)}},i.Blocks.field_attr_d={init(){this.jsonInit(r("d","String",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_D_TOOLTIP)}},i.Blocks.field_attr_lineWidth={init(){this.jsonInit(r("lineWidth","Number",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_LINEWIDTH_TOOLTIP)}},i.Blocks.field_attr_lineDash={init(){this.jsonInit(r("lineDash","String",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_LINEDASH_TOOLTIP)}},i.Blocks.field_attr_lineDashOffset={init(){this.jsonInit(r("lineDashOffset","Number",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_LINEDASHOFFSET_TOOLTIP)}},i.Blocks.field_attr_lineCap={init(){this.jsonInit(r({prop:"lineCap",options:["butt","round","square"]},"String",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_LINECAP_TOOLTIP)}},i.Blocks.field_attr_lineJoin={init(){this.jsonInit(r({prop:"lineJoin",options:["miter","round","bevel"]},"String",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_LINEJOIN_TOOLTIP)}},i.Blocks.field_attr_bounding={init(){this.jsonInit(r({prop:"bounding",options:["box","path"]},"String",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(()=>o.FIELD_ATTR_BOUNDING_TOOLTIP.replace("%1",o.$(this.getFieldValue("VALUE"),"ATTR_VALUE")))}},i.Blocks.field_attr_strokeColour={init(){this.jsonInit(r("strokeColor","Colour",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_STROKECOLOR_TOOLTIP)}},i.Blocks.field_attr_fillColour={init(){this.jsonInit(r("fillColor","Colour",i.Msg.ATTRS_PATH_HUE)),this.setTooltip(o.FIELD_ATTR_FILLCOLOR_TOOLTIP)}},i.Blocks.field_attr_cursor={init(){this.jsonInit(r({prop:"cursor",options:["default","crosshair","pointer","move","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","text","wait","help"]},"String",i.Msg.ATTRS_HUE)),this.setTooltip(o.FIELD_ATTR_CURSOR_TOOLTIP)}},i.Blocks.field_attr_draggable={init(){this.jsonInit(r({prop:"draggable",options:["yes","no"]},"String",i.Msg.ATTRS_HUE)),this.setTooltip(o.FIELD_ATTR_DRAGGABLE_TOOLTIP)}},i.Blocks.field_attr_textureFrame={init(){this.jsonInit({message0:o.FIELD_ATTR_TEXTUREFRAME_MSG0,args0:[{type:"input_value",name:"FRAME",check:"String"}],message1:o.FIELD_ATTR_TEXTUREFRAME_MSG1,args1:[{type:"input_value",name:"DURATION",check:"Number"}],nextStatement:"KeyValue",previousStatement:"KeyValue",colour:i.Msg.ATTRS_SPRITE_HUE,tooltip:o.FIELD_ATTR_TEXTUREFRAME_TOOLTIP})}},i.JavaScript.field_attr_textureFrame=function(t){return`\n'${`textureFrame$${Math.random().toString(36).slice(2)}`}': ${`[${i.JavaScript.valueToCode(t,"FRAME",i.JavaScript.ORDER_NONE)||"null"}, ${i.JavaScript.valueToCode(t,"DURATION",i.JavaScript.ORDER_NONE)||"100"}]`},`},Object.keys(i.Blocks).forEach(t=>{0!==t.indexOf("field_attr")||i.JavaScript[t]||(i.JavaScript[t]=_)})},function(t,e,n){const i=n(0),o=i.Msg,r=o.ANIMATE_HUE;function _(t){let e=t.getParent();for(;null!=e;){if("procedures_defreturn"===e.type){e.isAsync_=!0;break}e=e.getParent()}}i.Blocks.await={init(){this.jsonInit({message0:o.AWAIT_MSG0,args0:[{type:"field_number",name:"MILLISEC",value:16}],colour:r,previousStatement:"Statement",nextStatement:null,tooltip:()=>o.AWAIT_TOOLTIP.replace("%1",this.getFieldValue("MILLISEC"))})}},i.JavaScript.await=function(t){const e=parseInt(t.getFieldValue("MILLISEC"),10);return _(t),`await spritly.runtime.wait(${e});\n`},i.Blocks.await_frame={init(){this.jsonInit({message0:o.AWAIT_FRAME_MSG0,args0:[{type:"field_dropdown",name:"LAYER",options:[[o.COMMON_FGLAYER,"fglayer"],[o.COMMON_BGLAYER,"bglayer"]]}],colour:r,previousStatement:"Statement",nextStatement:"Statement",tooltip:o.AWAIT_FRAME_TOOLTIP})}},i.JavaScript.await_frame=function(t){const e=t.getFieldValue("LAYER");return _(t),`await spritly.runtime.scene.layer('${e}').prepareRender();\n`},i.Blocks.sprite_animate={init(){this.jsonInit({message0:o.SPRITE_ANIMATE_MSG0,args0:[{type:"field_dropdown",name:"ASYNC?",options:[[o.SPRITE_ANIMATE_OPTION_ASYNC_DEFAULT,"-"],[o.SPRITE_ANIMATE_OPTION_ASYNC_AWAIT,"await"]]},{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"input_value",name:"DURATION",check:"Number"}],message1:o.SPRITE_ANIMATE_MSG1,args1:[{type:"input_statement",name:"FROM_ATTRS",check:"KeyValue"}],message2:o.SPRITE_ANIMATE_MSG2,args2:[{type:"input_statement",name:"TO_ATTRS",check:"KeyValue"}],message3:o.SPRITE_ANIMATE_MSG3,args3:[{type:"input_value",name:"EASING",check:"String"}],colour:r,previousStatement:"Statement",nextStatement:"Statement",tooltip:o.SPRITE_ANIMATE_TOOLTIP})}},i.JavaScript.sprite_animate=function(t){const e="await"===t.getFieldValue("ASYNC?"),n=i.JavaScript.valueToCode(t,"SPRITE",i.JavaScript.ORDER_NONE)||"null",o=i.JavaScript.valueToCode(t,"DURATION",i.JavaScript.ORDER_NONE)||600,r=i.JavaScript.valueToCode(t,"EASING",i.JavaScript.ORDER_NONE)||'"ease"';let a=`${n}.animate([{${i.JavaScript.statementToCode(t,"FROM_ATTRS")}\n},{${i.JavaScript.statementToCode(t,"TO_ATTRS")}\n}], {duration: ${1e3*o}, fill: 'forwards', easing: ${r}})`;return e&&(_(t),a=`if(!${n}.layer) console.error('${n} must append to layer before animated!'); \nawait ${a}.finished`),`${a};\n`},i.Blocks.easing={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"EASING",options:[[o.EASING_OPTION_EASING_EASE,"ease"],[o.EASING_OPTION_EASING_EASEIN,"ease-in"],[o.EASING_OPTION_EASING_EASEOUT,"ease-out"],[o.EASING_OPTION_EASING_EASEINOUT,"ease-in-out"]]}],colour:r,output:"String",tooltip:o.EASING_OPTION_TOOLTIP})}},i.JavaScript.easing=function(t){return[`'${t.getFieldValue("EASING")}'`,i.JavaScript.ORDER_NONE]},i.Blocks.bezier_easing={init(){this.jsonInit({message0:o.BEZIER_EASING_MSG0,args0:[{type:"field_number",name:"X0",value:.68},{type:"field_number",name:"Y0",value:-.55},{type:"field_number",name:"X1",value:.265},{type:"field_number",name:"Y1",value:1.55}],colour:r,output:"String",tooltip:o.BEZIER_EASING_TOOLTIP})}},i.JavaScript.bezier_easing=function(t){return[`'cubic-bezier(${t.getFieldValue("X0")},${t.getFieldValue("Y0")},${t.getFieldValue("X1")},${t.getFieldValue("Y1")})'`,i.JavaScript.ORDER_NONE]}},function(t,e,n){const i=n(0),o=i.Msg;i.Blocks.nil={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"VALUE",options:[[o.LITERAL_NULL,"null"],[o.LITERAL_UNDEFINED,"undefined"]]}],colour:o.LITERAL_HUE}),this.setOutput(!0),this.setTooltip(()=>o.NIL_TOOLTIP.replace("%1",this.getFieldValue("VALUE")))}},i.JavaScript.nil=function(t){return[t.getFieldValue("VALUE"),i.JavaScript.ORDER_NONE]},i.Blocks.boolean={init(){i.Blocks.logic_boolean.init.call(this),this.setColour(i.Msg.LITERAL_HUE)}},i.JavaScript.boolean=i.JavaScript.logic_boolean,i.Blocks.number={init(){i.Blocks.math_number.init.call(this),this.setColour(i.Msg.LITERAL_HUE)}},i.JavaScript.number=i.JavaScript.math_number,i.Blocks.string={init(){this.jsonInit({message0:"%1 %2",args0:[{type:"field_input",name:"TEXT",text:""},{type:"input_value",name:"NEXT"}],output:"String",colour:i.Msg.LITERAL_HUE,helpUrl:i.Msg.TEXT_TEXT_HELPURL,tooltip:i.Msg.TEXT_TEXT_TOOLTIP,extensions:["text_quotes","parent_tooltip_when_inline"]})}},i.JavaScript.string=function(t){const e=i.JavaScript.text(t),n=i.JavaScript.valueToCode(t,"NEXT",i.JavaScript.ORDER_ATOMIC);return n?[`${e[0]} + ${n}`,e[1]]:e},i.Blocks.object_create={init(){this.appendDummyInput().appendField("new Object"),this.appendStatementInput("FIELDS").setCheck(["KeyValue"]),this.setOutput(!0),this.setColour(o.LITERAL_HUE),this.setTooltip(o.OBJECT_CREATE_TOOLTIP)}},i.JavaScript.object_create=function(t){return[`{${i.JavaScript.statementToCode(t,"FIELDS")}\n}`,i.JavaScript.ORDER_MEMBER]};const r=i.Blocks.colour_picker.init;i.Blocks.colour_picker.init=function(){r.call(this),this.setColour(i.Msg.LITERAL_HUE)},i.Blocks.loop_get_index={init(){this.jsonInit({message0:o.LOOP_GET_INDEX_MSG0,colour:o.LITERAL_HUE,output:"Number",tooltip:o.LOOP_GET_INDEX_TOOLTIP})}},i.JavaScript.loop_get_index=function(t){return["index",i.JavaScript.ORDER_NONE]}},function(t,e,n){const i=n(0),o=i.Msg,r=i.Msg.LOG_HUE;i.Blocks.log_log={init(){this.jsonInit({message0:"ðŸ“‹ %1 %2",args0:[{type:"field_dropdown",name:"LOG",options:[[o.LOG_OPTION_LOG_LOG,"log"],[o.LOG_OPTION_LOG_WARN,"warn"],[o.LOG_OPTION_LOG_ERROR,"error"]]},{type:"input_value",name:"MSG"}],colour:r,previousStatement:"Statement",nextStatement:"Statement",tooltip:o.LOG_TOOLTIP})}},i.JavaScript.log_log=function(t){const e=i.JavaScript.valueToCode(t,"MSG",i.JavaScript.ORDER_NONE);return`console.${t.getFieldValue("LOG")}(${e});\n`},i.Blocks.log_alert={init(){this.jsonInit({message0:o.LOG_ALERT_MSG0,args0:[{type:"input_value",name:"MSG"}],colour:r,previousStatement:"Statement",nextStatement:"Statement",tooltip:o.LOG_ALERT_TOOLTIP})}},i.JavaScript.log_alert=function(t){return`alert(${i.JavaScript.valueToCode(t,"MSG",i.JavaScript.ORDER_NONE)});\n`}},function(t,e,n){const i=n(0),o=i.Msg,r=i.Msg.MATH_HUE;i.Blocks.random_string={init(){this.jsonInit({message0:o.RANDOM_STRING_MSG0,colour:r,output:"String",tooltip:o.RANDOM_STRING_TOOLTIP})}},i.JavaScript.random_string=function(t){return["'Math.random().toString(36).slice(2)'",i.JavaScript.ORDER_NONE]},i.Blocks.random_colour_rgb={init(){this.jsonInit({message0:o.RANDOM_COLOUR_RGB_MSG0,colour:r,output:"Colour",tooltip:o.RANDOM_COLOUR_RGB_TOOLTIP})}},i.JavaScript.random_colour_rgb=function(t){return["spritly.runtime.random_color()",i.JavaScript.ORDER_NONE]},i.Blocks.random_colour_hue={init(){this.jsonInit({message0:o.RANDOM_COLOUR_HUE_MSG0,message1:o.RANDOM_COLOUR_HUE_MSG1,args1:[{type:"field_number",name:"S",value:100},{type:"field_number",name:"L",value:50},{type:"field_number",name:"A",value:1}],colour:r,output:"Colour",tooltip:o.RANDOM_COLOUR_HUE_TOOLTIP})}},i.JavaScript.random_colour_hue=function(t){Math.floor(360*Math.random());return[`spritly.runtime.random_color_hue(${t.getFieldValue("S")},${t.getFieldValue("L")},${t.getFieldValue("A")})`,i.JavaScript.ORDER_NONE]}},function(t,e,n){const i=n(0),o=i.Msg,r=o.LISTS_HUE;i.Blocks.lists_create_range={init(){this.jsonInit({message0:o.LISTS_CREATE_RANGE_MSG0,message1:o.LISTS_CREATE_RANGE_MSG1,args1:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Array",colour:r,tooltip:o.LISTS_CREATE_RANGE_TOOLTIP})}},i.JavaScript.lists_create_range=function(t){const e=i.JavaScript.valueToCode(t,"FROM",i.JavaScript.ORDER_ASSIGNMENT)||"0",n=i.JavaScript.valueToCode(t,"TO",i.JavaScript.ORDER_ASSIGNMENT)||"0";return[`(Array.from({length: Math.abs(${e} - ${n}) + 1}).map((_, i) => ${e} + (${e} - ${n} > 0 ? -1 : 1) * i))`,i.JavaScript.ORDER_NONE]}},function(t,e,n){const i=n(0),o=i.Msg;i.Blocks.key_value={init(){this.jsonInit({message0:o.KEYVALUE_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"},{type:"input_value",name:"VALUE"}],colour:o.GETTER_SETTER_HUE,previousStatement:"KeyValue",nextStatement:"KeyValue"}),this.setTooltip(o.KEYVALUE_TOOLTIP)}},i.JavaScript.key_value=function(t){return`\n${i.JavaScript.valueToCode(t,"KEY",i.JavaScript.ORDER_NONE)||"key"}: ${i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_NONE)||"null"},`},i.Blocks.object_get_prop={init(){this.jsonInit({message0:o.OBJECT_GET_PROP_MSG0,args0:[{type:"input_value",name:"OBJECT"},{type:"input_value",name:"PROP",check:"String"}],inputsInline:!0,output:null,colour:o.GETTER_SETTER_HUE}),this.setTooltip(o.OBJECT_GET_PROP_TOOLTIP)}},i.JavaScript.object_get_prop=function(t){return[`${i.JavaScript.valueToCode(t,"OBJECT",i.JavaScript.ORDER_NONE)||"Object()"}[${i.JavaScript.valueToCode(t,"PROP",i.JavaScript.ORDER_NONE)||"key"}]`,i.JavaScript.ORDER_NONE]}},function(t,e,n){const i=n(0),o=i.Msg,r=o.STORE_HUE;i.Blocks.store_set={init(){this.jsonInit({message0:o.STORE_SET_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"},{type:"input_value",name:"VALUE"}],inputsInline:!0,colour:r,previousStatement:"Statement",nextStatement:"Statement",tooltip:o.STORE_SET_TOOLTIP})}},i.JavaScript.store_set=function(t){return`spritly.runtime.Store.set(${i.JavaScript.valueToCode(t,"KEY",i.JavaScript.ORDER_MEMBER)||"'key'"}, ${i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_ASSIGNMENT)||"null"}, target);\n`},i.Blocks.store_get={init(){this.jsonInit({message0:o.STORE_GET_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"}],colour:r,output:null,tooltip:o.STORE_GET_TOOLTIP})}},i.JavaScript.store_get=function(t){return[`spritly.runtime.Store.get(${i.JavaScript.valueToCode(t,"KEY",i.JavaScript.ORDER_MEMBER)||"'key'"})`,i.JavaScript.ORDER_NONE]},i.Blocks.store_delete={init(){this.jsonInit({message0:o.STORE_DELETE_MSG0,args0:[{type:"input_value",name:"KEY",check:"String"}],colour:r,output:null,tooltip:o.STORE_DELETE_TOOLTIP})}},i.JavaScript.store_delete=function(t){return[`spritly.runtime.Store.delete(${i.JavaScript.valueToCode(t,"KEY",i.JavaScript.ORDER_MEMBER)||"'key'"})`,i.JavaScript.ORDER_NONE]}},function(t,e,n){const i=n(0),o=i.Msg,r=o.SOUND_HUE;i.Blocks.sound_play={init(){this.jsonInit({message0:o.SOUND_PLAY_MSG0,args0:[{type:"input_value",name:"SOUND",check:"String"}],colour:r,previousStatement:"Statement",nextStatement:"Statement",tooltip:o.SOUND_PLAY_TOOLTIP})}},i.JavaScript.sound_play=function(t){return`spritly.runtime.Audio.play(${i.JavaScript.valueToCode(t,"SOUND",i.JavaScript.ORDER_NONE)});\n`}},function(t,e,n){const i=n(0),o=i.Msg;i.Blocks.procedures_mutatorarg.validator_=function(t){const e=i.Mutator.findParentWs(this.sourceBlock_.workspace);if(!(t=t.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;let n=e.getVariable(t,"");return n&&n.name!==t&&e.renameVarById(n.getId(),t),n||(n=e.createVariable(t,null,`ARGS$$${Math.random().toString(36).slice(2)}`))&&this.createdVariables_&&this.createdVariables_.push(n),t},i.Blocks.procedures_defreturn.updateVarName=function(t){for(var e=t.name,n=!1,o=0;o<this.argumentVarModels_.length;o++)if(this.argumentVarModels_[o].getId()==t.getId()){var r=this.arguments_[o];this.arguments_[o]=e,n=!0}n&&(this.displayRenamedVar_(r,e),i.Procedures.mutateCallers(this))},i.Blocks.procedures_callreturn.setProcedureParameters_=function(t,e){var n=i.Procedures.getDefinition(this.getProcedureCall(),this.workspace),o=n&&n.mutator&&n.mutator.isVisible();if(o||(this.quarkConnections_={},this.quarkIds_=null),e)if(t.join("\n")!=this.arguments_.join("\n")){if(e.length!=t.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);var r=this.rendered;this.rendered=!1;for(var _=0;_<this.arguments_.length;_++){var a=this.getInput("ARG"+_);if(a){var s=a.connection.targetConnection;this.quarkConnections_[this.quarkIds_[_]]=s,o&&s&&-1==e.indexOf(this.quarkIds_[_])&&(s.disconnect(),s.getSourceBlock().bumpNeighbours_())}}if(this.arguments_=[].concat(t),this.updateShape_(),this.quarkIds_=e,this.quarkIds_)for(_=0;_<this.arguments_.length;_++){var T=this.quarkIds_[_];if(T in this.quarkConnections_){s=this.quarkConnections_[T];i.Mutator.reconnect(s,this,"ARG"+_)||delete this.quarkConnections_[T]}}this.rendered=r,this.rendered&&this.render()}else this.quarkIds_=e},i.JavaScript.procedures_defreturn=function(t){var e=i.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),i.Procedures.NAME_TYPE),n=i.JavaScript.statementToCode(t,"STACK");if(i.JavaScript.STATEMENT_PREFIX){var o=t.id.replace(/\$/g,"$$$$");n=i.JavaScript.prefixLines(i.JavaScript.STATEMENT_PREFIX.replace(/%1/g,"'"+o+"'"),i.JavaScript.INDENT)+n}i.JavaScript.INFINITE_LOOP_TRAP&&(n=i.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+t.id+"'")+n);var r=i.JavaScript.valueToCode(t,"RETURN",i.JavaScript.ORDER_NONE)||"";r&&(r=i.JavaScript.INDENT+"return "+r+";\n");for(var _=[],a=0;a<t.arguments_.length;a++)_[a]=i.JavaScript.variableDB_.getName(t.arguments_[a],i.Variables.NAME_TYPE);var s="";this.isAsync_&&(s="async ",e=e.replace(/^âŒ›ï¸/,""));var T=s+"function "+e+"("+_.join(", ")+") {\n"+n+r+"}";return T=i.JavaScript.scrub_(t,T),i.JavaScript.definitions_["%"+e]=T,null},i.Blocks.procedures_await={init(){this.jsonInit({message0:o.PROCEDURES_AWAIT_MSG0,args0:[{type:"input_value",name:"PROMISE"}],colour:o.PROCEDURE_HUE,output:null,tooltip:o.PROCEDURES_AWAIT_TOOLTIP})}},i.JavaScript.procedures_await=function(t){return[`(await ${i.JavaScript.valueToCode(t,"PROMISE",i.JavaScript.ORDER_NONE)||"null"})`,i.JavaScript.ORDER_NONE]},i.Blocks.procedures_call={init(){this.jsonInit({message0:"%1 %2",args0:[{type:"field_dropdown",name:"CALLTYPE",options:[[o.SPRITE_ANIMATE_OPTION_ASYNC_DEFAULT,"void"],[o.SPRITE_ANIMATE_OPTION_ASYNC_AWAIT,"await"]]},{type:"input_value",name:"PROC"}],colour:o.PROCEDURE_HUE,nextStatement:"Statement",previousStatement:"Statement"})}},i.JavaScript.procedures_call=function(t){return`${t.getFieldValue("CALLTYPE")} ${i.JavaScript.valueToCode(t,"PROC",i.JavaScript.ORDER_NONE)||"null"};\n`}},function(t,e,n){const i=n(0);i.Generator.prototype.indent=function(t){return this.prefixLines(t,this.INDENT)},i.JavaScript.init=function(t){i.JavaScript.definitions_=Object.create(null),i.JavaScript.functionNames_=Object.create(null),i.JavaScript.variableDB_?i.JavaScript.variableDB_.reset():i.JavaScript.variableDB_=new i.Names(i.JavaScript.RESERVED_WORDS_),i.JavaScript.variableDB_.setVariableMap(t.getVariableMap());const e=[],n=i.Variables.allDeveloperVariables(t);for(let t=0;t<n.length;t++)e.push(i.JavaScript.variableDB_.getName(n[t],i.Names.DEVELOPER_VARIABLE_TYPE));const o=i.Variables.allUsedVarModels(t).filter(t=>0!==t.getId().indexOf("ARGS$$"));for(let t=0;t<o.length;t++)e.push(i.JavaScript.variableDB_.getName(o[t].getId(),i.Variables.NAME_TYPE));e.length&&(i.JavaScript.definitions_.variables=`let ${e.join(", ")};`)},i.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=i.getMainWorkspace());let e=[];this.init(t);const n=t.getTopBlocks(!0);for(let t=0;t<n.length;t++){const i=n[t];let o=this.blockToCode(i);!i.disabled&&i.scope&&(Array.isArray(o)&&(o=o[0]),null!=o&&(""===o&&(o="void(0);\n"),i.outputConnection&&(o=this.scrubNakedValue(o)),"function"==typeof i.scope&&(o=i.scope(this,o)),e.push(o),e.push("\n")))}return e=e.slice(0,-1).join("\n"),e=(e=(e=(e=this.finish(e)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")}},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"debounce",function(){return v});n(1),n(2);const o=n(0),{Msg:r}=o;r.$=((t,e="COMMON")=>{const n=`${e}_${t.toUpperCase()}`;return n in r?r[n]:t});n(3),n(4);const _=new Map,a=[],s={set(t,e){const n=_.get(t)||new Set;return n.add(e),_.set(t,n),n},delete(t,e){const n=_.get(t)||new Set;return n.delete(e),n},get:t=>[..._.get(t)||[]],clear(){_.clear()},addBlockFields(t,e,n){a.push({key:t,type:e,fieldName:n})},createFromBlockFields(t){a.forEach(e=>{const{key:n,type:i,fieldName:o}=e;t.querySelectorAll(`block[type="${i}"] > field[name="${o}"]`).forEach(t=>{s.set(n,t.textContent)})})}},T=n(0),l=T.Msg,E=T.Blocks.controls_if.init;T.Blocks.controls_if.init=function(){E.call(this);for(let t=0;t<20;t++){const e=this.getInput(`DO${t}`);if(!e)break;e.setCheck("Statement")}this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(l.FLOWS_HUE)},T.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN.saveConnections=function(t){let e,n,i=t.nextConnection.targetBlock(),o=1;for(;i;){switch(i.type){case"controls_if_elseif":e=this.getInput(`IF${o}`),(n=this.getInput(`DO${o}`)).setCheck("Statement"),i.valueConnection_=e&&e.connection.targetConnection,i.statementConnection_=n&&n.connection.targetConnection,o++;break;case"controls_if_else":(n=this.getInput("ELSE")).setCheck("Statement"),i.statementConnection_=n&&n.connection.targetConnection;break;default:throw TypeError(`Unknown block type: ${i.type}`)}i=i.nextConnection&&i.nextConnection.targetBlock()}};const c=T.Blocks.controls_repeat_ext.init;T.Blocks.controls_repeat_ext.init=function(){c.call(this),this.getInput("DO").setCheck("Statement"),this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(l.FLOWS_HUE)},T.JavaScript.controls_repeat_ext=function(t){let e;e=t.getField("TIMES")?String(Number(t.getFieldValue("TIMES"))):T.JavaScript.valueToCode(t,"TIMES",T.JavaScript.ORDER_ASSIGNMENT)||"0";let n=T.JavaScript.statementToCode(t,"DO");n=T.JavaScript.addLoopTrap(n,t.id);let i="";const o=T.JavaScript.variableDB_.getDistinctName("count",T.Variables.NAME_TYPE);let r=e,_="";return e.match(/^\w+$/)||T.isNumber(e)||(_=`, ${r=T.JavaScript.variableDB_.getDistinctName("repeat_end",T.Variables.NAME_TYPE)} = ${e}`),i+=`for(let ${o} = 0${_}; ${o} < ${r}; ${o}++){\n${n}}\n`};const O=T.Blocks.controls_whileUntil.init;T.Blocks.controls_whileUntil.init=function(){O.call(this),this.getInput("DO").setCheck("Statement"),this.setNextStatement(!0,"Statement"),this.setPreviousStatement(!0,"Statement"),this.setColour(l.FLOWS_HUE)},T.Blocks.list_foreach={init(){this.jsonInit({message0:l.LIST_FOREACH_MSG0,args0:[{type:"input_value",name:"LIST",check:["String","Array"]}],message1:l.LIST_FOREACH_MSG1,args1:[{type:"input_statement",name:"DO",check:"Statement"}],message2:l.LIST_FOREACH_MSG2,args2:[{type:"field_input",name:"ITEM",text:"item"},{type:"field_dropdown",name:"INDEX",options:["i","j","k","l","m"].map(t=>[t,t])}],colour:l.FLOWS_HUE,previousStatement:"Statement",nextStatement:"Statement",tooltip:l.LIST_FOREACH_TOOLTIP})}},T.JavaScript.list_foreach=function(t){const e=T.JavaScript.valueToCode(t,"LIST",T.JavaScript.ORDER_NONE)||"[]",n=t.getFieldValue("ITEM"),i=t.getFieldValue("INDEX");let o=T.JavaScript.statementToCode(t,"DO"),r=/^([\s\t]+)/.exec(o);return r=r?`\n${r[0]}`:`\n${T.Generator.prototype.INDENT}`,o&&(o=`${o}\n`),`await ${e}.reduce(async function($$prestep, ${n}, ${i}) {${r}await $$prestep;\n${o}}, null);\n`},T.Blocks.list_index={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"INDEX",options:["i","j","k","l","m"].map(t=>[t,t])}],output:"Number",colour:l.FLOWS_HUE,tooltip:l.LIST_INDEX_TOOLTIP})}},T.JavaScript.list_index=function(t){return[t.getFieldValue("INDEX"),T.JavaScript.ORDER_NONE]},T.Blocks.list_item={init(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"ITEM",options:()=>{const t=s.get("ListItems");return t.length?t.map(t=>[t,t]):[["item","item"]]}}],output:null,colour:l.FLOWS_HUE,tooltip:l.LIST_ITEM_TOOLTIP})}},T.JavaScript.list_item=function(t){return[t.getFieldValue("ITEM"),T.JavaScript.ORDER_NONE]};n(5);const S=n(0),p=S.Msg,R=S.Msg.SIGNALS_HUE;function u(...t){const e=["START","STORE_PROPERTY_UPDATE","LAYER_CLICKED","KEYDOWN","KEYUP","ELEMENT_CREATED","ELEMENT_DESTROYED"];return()=>[...e,...t,...s.get("Signals")].map(t=>[p.$(t,"SIGNAL_DO_OPTION_SIGNAL"),t])}function I(){const t=s.get("Sprites");return t.length>0?t.map(t=>[t,t]):[["",""]]}S.Blocks.signal_do={init(){this.jsonInit({message0:p.SIGNAL_DO_MSG0,args0:[{type:"field_dropdown",name:"SIGNAL",options:u()}],colour:R,nextStatement:"Statement",tooltip:p.SIGNAL_DO_TOOLTIP})},scope(t,e){return`spritly.runtime.Signal.on('${this.getFieldValue("SIGNAL")}', async function(sender, data){\n  let target = data[spritly.runtime.Symbols.target] || sender;\n  let receiver = target;\n\n${t.indent(e)}});`}},S.JavaScript.signal_do=function(t){return""},S.Blocks.signal_new_sprite_as_receiver={init(){const t=`Sprite_${Math.random().toString().slice(2,7)}`;this.jsonInit({message0:p.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG0,args0:[{type:"field_dropdown",name:"SIGNAL",options:u()}],message1:p.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG1,args1:[{type:"field_dropdown",name:"TYPE",options:[[p.COMMON_SPRITE,"Sprite"],[p.COMMON_LABEL,"Label"],[p.COMMON_PATH,"Path"]]}],message2:p.SIGNAL_NEW_SPRITE_AS_RECEIVER_MSG2,args2:[{type:"field_input",name:"ID",text:t}],colour:R,nextStatement:"Statement",tooltip:p.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP})},onchange(t){t instanceof S.Events.Change&&"field"===t.element&&"ID"===t.name&&t.blockId===this.id&&(this.oldValue_||(this.oldValue_=t.oldValue),clearTimeout(this.changeIdTimer_),this.changeIdTimer_=setTimeout(()=>{const t=this.oldValue_;delete this.oldValue_;const e=this.getFieldValue("ID");this.workspace.getBlocksByType("sprite").forEach(n=>{n.getFieldValue("SPRITE")===t&&n.setFieldValue(e,"SPRITE")})},500))},destroyed(){const t=this.getFieldValue("ID");this.workspace.getBlocksByType("sprite").forEach(e=>{e.getFieldValue("SPRITE")===t&&(e.setDisabled(!0),e.setWarningText(S.Msg.SPRITE_DELETED))})},scope(t,e){const n=this.getFieldValue("SIGNAL"),i=this.getFieldValue("ID");return`spritly.runtime.Signal.on('${n}', async function(sender, data){\n  let receiver = spritly.runtime.ElementList.getElementById('${i}');\n  if(receiver == null){\n    receiver = spritly.runtime.spritejs.createElement('${this.getFieldValue("TYPE")}', {id: '${i}'});\n    spritly.runtime.ElementList.add(receiver);\n  }\n  let target = data[spritly.runtime.Symbols.target] || receiver;\n\n${t.indent(e)}});`}},S.JavaScript.signal_new_sprite_as_receiver=function(t){return""},S.Blocks.signal_when_receiver_is={init(){this.jsonInit({message0:p.SIGNAL_WHEN_RECEIVER_IS_MSG0,args0:[{type:"field_dropdown",name:"SIGNAL",options:u("ELEMENT_CREATED")}],message1:p.SIGNAL_WHEN_RECEIVER_IS_MSG1,args1:[{type:"field_dropdown",name:"ID",options:I}],colour:R,nextStatement:"Statement",tooltip:p.SIGNAL_NEW_SPRITE_AS_RECEIVER_TOOLTIP})},scope(t,e){return`spritly.runtime.Signal.on('${this.getFieldValue("SIGNAL")}', async function(sender, data){\n  const receiver = spritly.runtime.ElementList.getElementById('${this.getFieldValue("ID")}');\n  let target = data[spritly.runtime.Symbols.target] || receiver;\n\n${t.indent(e)};});`}},S.JavaScript.signal_when_receiver_is=function(){return""},S.Blocks.get_data={init(){this.jsonInit({message0:p.GET_DATA_MSG0,colour:R,output:"Object",tooltip:p.GET_DATA_TOOLTIP})}},S.JavaScript.get_data=function(t){return["data",S.JavaScript.ORDER_NONE]},S.Blocks.get_data_prop={init(){this.jsonInit({message0:p.GET_DATA_PROP_MSG0,args0:[{type:"field_dropdown",name:"PROP",options:["offsetX","offsetY","layerX","layerY","altKey","ctrlKey","shiftKey","buttons","key","keyCode"].map(t=>[p.$(t,"GET_DATA_PROP_OPTION_PROP"),t])}],colour:R,output:["Number","String","Boolean"],tooltip:p.GET_DATA_PROP_TOOLTIP})}},S.JavaScript.get_data_prop=function(t){return[`data[spritly.runtime.Symbols.${t.getFieldValue("PROP")}]`,S.JavaScript.ORDER_NONE]},S.Blocks.get_store_data_prop={init(){this.jsonInit({message0:p.GET_DATA_PROP_MSG0,args0:[{type:"field_dropdown",name:"PROP",options:["property","oldValue","newValue"].map(t=>[p.$(t,"GET_DATA_PROP_OPTION_PROP"),t])}],colour:R,output:null,tooltip:p.GET_DATA_PROP_TOOLTIP2})}},S.JavaScript.get_store_data_prop=function(t){return[`data[spritly.runtime.Symbols.${t.getFieldValue("PROP")}]`,S.JavaScript.ORDER_MEMBER]};const A=["immediately","onclick","ondblclick","onmousedown","onmousemove","onmouseup","onmouseenter","onmouseleave","ontap","onlongtap","ondragged","ondraggedonto","oncollision"];S.Blocks.signal_onevent_send={init(){this.jsonInit({message0:p.SIGNAL_ONEVENT_SEND_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"field_dropdown",name:"EVENT",options:A.map(t=>[p.$(t,"EVENT"),t])},{type:"field_input",name:"SIGNAL",text:"MY_SIGNAL"}],message1:p.SIGNAL_ONEVENT_SEND_MSG1,args1:[{type:"input_statement",name:"DATA",check:"KeyValue"}],colour:R,previousStatement:"Statement",nextStatement:"Statement",tooltip:`${p.SIGNAL_ONEVENT_SEND_TOOLTIP}\n${p.SENDER_RECEIVER_TARGET_TOOLTIP}`})}},S.JavaScript.signal_onevent_send=function(t){const e=S.JavaScript.valueToCode(t,"SPRITE",S.JavaScript.ORDER_NONE)||"null",n=t.getFieldValue("EVENT"),i=t.getFieldValue("SIGNAL"),o=S.JavaScript.statementToCode(t,"DATA");if("immediately"!==n&&"oncollision"!==n){return`${e}.on('${n.slice(2)}', \n  evt => {\n    const {altKey, buttons, ctrlKey, shiftKey} = evt.originalEvent;\n    const runtime = spritly.runtime;\n    runtime.Signal.send('${i}', ${e},\n      Object.assign(\n        {\n          [runtime.Symbols.target]: evt.target,\n          [runtime.Symbols.offsetX]: evt.offsetX,\n          [runtime.Symbols.offsetY]: evt.offsetY,\n          [runtime.Symbols.layerX]: evt.layerX,\n          [runtime.Symbols.layerY]: evt.layerY,\n          [runtime.Symbols.altKey]: altKey,\n          [runtime.Symbols.buttons]: buttons,\n          [runtime.Symbols.ctrlKey]: ctrlKey,\n          [runtime.Symbols.shiftKey]: shiftKey,\n        },\n        {${o}},\n      ));\n  });`}return"oncollision"===n?`${e}.on('update', () => {\n  spritly.runtime.getCollisions(${e}).forEach((s) => {\n    spritly.runtime.Signal.send('${i}', ${e}, {[spritly.runtime.Symbols.target]: s});      \n  });\n});\n${e}.forceUpdate();\n`:`spritly.runtime.Signal.send('${i}', ${e}, {${o}});\n`};const L=n(0).Msg;const d=n(0),N=d.Msg,m=d.Msg.SPRITE_HUE,g={type:"field_dropdown",name:"SPRITE",options:function(){const t=s.get("Sprites");return[[L.COMMON_TARGET,"target"],[L.COMMON_SENDER,"sender"],[L.COMMON_RECEIVER,"receiver"]].concat(t.map(t=>[t,t]))}};function P(){return["id","name","anchorX","anchorY","x","y","width","height","bgcolor","opacity","rotate","scaleX","scaleY","translateX","translateY","skewX","skewY","borderRadius","borderWidth","borderStyle","borderColor","dashOffset","texture","text","fontSize","fontFamily","fontStyle","fontVariant","fontWeight","textAlign","lineHeight","d","lineWidth","lineDash","lineDashOffset","lineCap","lineJoin","bounding","strokeColor","fillColor"].map(t=>[N.$(t,"ATTR"),t])}d.Blocks.sprite={init(){this.jsonInit({message0:"%1",args0:[g],colour:m,output:"Sprite",tooltip:N.SPRITE_MSG0_TOOLTIP})},onchange(t){t instanceof d.Events.Change&&"field"===t.element&&"SPRITE"===t.name&&(this.setWarningText(null),this.setDisabled(!1))}},d.JavaScript.sprite=function(t){let e=t.getFieldValue("SPRITE");return"target"!==e&&"sender"!==e&&"receiver"!==e&&"item"!==e&&(e=`spritly.runtime.ElementList.getElementById('${e}')`),[e,d.JavaScript.ORDER_NONE]},d.Blocks.sprite_append_to={init(){this.jsonInit({message0:N.SPRITE_APPEND_TO_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"field_dropdown",name:"LAYER",options:[[N.COMMON_FGLAYER,"fglayer"],[N.COMMON_BGLAYER,"bglayer"]]}],colour:m,previousStatement:"Statement",nextStatement:"Statement",tooltip:`${N.SPRITE_APPEND_TO_TOOLTIP}\n${N.FGLAYER_BGLAYER_TOOTIP}`})}},d.JavaScript.sprite_append_to=function(t){const e=d.JavaScript.valueToCode(t,"SPRITE",d.JavaScript.ORDER_NONE)||"null";return`spritly.runtime.scene.layer('${t.getFieldValue("LAYER")}').append(${e});\n`},d.Blocks.sprite_attrs={init(){this.jsonInit({message0:N.SPRITE_ATTRS_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"}],message1:"%1",args1:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:m,previousStatement:"Statement",nextStatement:"Statement",tooltip:N.SPRITE_ATTRS_TOOLTIP})}},d.JavaScript.sprite_attrs=function(t){const e=d.JavaScript.valueToCode(t,"SPRITE",d.JavaScript.ORDER_NONE)||"null";return`${e}.attr(spritly.runtime.parse_attr(${e}, {${d.JavaScript.statementToCode(t,"ATTRS")}\n}));\n`},d.Blocks.sprite_create_attrs={init(){this.jsonInit({message0:N.SPRITE_CREATE_ATTRS_MSG0,args0:[{type:"field_dropdown",name:"TYPE",options:[[N.COMMON_SPRITE,"Sprite"],[N.COMMON_LABEL,"Label"],[N.COMMON_PATH,"Path"]]}],message1:N.SPRITE_CREATE_ATTRS_MSG1,args1:[{type:"field_input",name:"NAME",text:"MyName"}],message2:"%1",args2:[{type:"input_statement",name:"ATTRS",check:"KeyValue"}],colour:m,previousStatement:"Statement",nextStatement:"Statement",tooltip:N.SPRITE_CREATE_ATTRS_TOOLTIP})}},d.JavaScript.sprite_create_attrs=function(t){return`spritly.runtime.ElementList.add((function () {\n  const sprite = spritly.runtime.spritejs.createElement('${t.getFieldValue("TYPE")}');\n  sprite.attr(spritly.runtime.parse_attr(sprite, {name: '${t.getFieldValue("NAME")}'}, {${d.JavaScript.statementToCode(t,"ATTRS").split(/\n/g).join(`\n${d.Generator.prototype.INDENT}`)}\n  }));\n  return sprite;\n}()));\n`},d.Blocks.sprite_each_elements_named={init(){this.jsonInit({message0:N.SPRITE_EACH_ELEMENTS_NAMED_MSG0,args0:[{type:"field_dropdown",name:"NAME",options:()=>{const t=s.get("SpriteNames");return t.length>0?t.map(t=>[t,t]):[["",""]]}}],colour:m,output:"Array",tooltip:N.SPRITE_EACH_ELEMENTS_NAMED_TOOLTIP})}},d.JavaScript.sprite_each_elements_named=function(t){return[`spritly.runtime.ElementList.getElementsByName('${t.getFieldValue("NAME")}')`,d.JavaScript.ORDER_NONE]},d.Blocks.sprite_destroy={init(){this.jsonInit({message0:N.SPRITE_DESTROY_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"}],colour:m,previousStatement:"Statement",nextStatement:"Statement",tooltip:N.SPRITE_DESTROY_TOOLTIP})}},d.JavaScript.sprite_destroy=function(t){return`spritly.runtime.ElementList.remove(${d.JavaScript.valueToCode(t,"SPRITE",d.JavaScript.ORDER_NONE)||"null"});\n`},d.Blocks.sprite_get_attr={init(){this.jsonInit({message0:N.SPRITE_GET_ATTR_MSG0,args0:[{type:"input_value",name:"SPRITE",check:"Sprite"},{type:"field_dropdown",name:"ATTR",options:P}],colour:m,output:!0,tooltip:N.SPRITE_GET_ATTR_TOOLTIP})}},d.JavaScript.sprite_get_attr=function(t){return[`spritly.runtime.get_attr(${d.JavaScript.valueToCode(t,"SPRITE",d.JavaScript.ORDER_NONE)||"null"}, '${t.getFieldValue("ATTR")}')`,d.JavaScript.ORDER_NONE]};n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13);function h(t){const e=[];t.querySelectorAll("next > block").forEach(t=>{const n=t.parentNode.parentNode;t.parentNode.remove(),t.remove(),function(t){for(let n=0;n<e.length;n++){const i=e[n];if(i.has(t))return i}const n=new Set;return n.add(t),e.push(n),n}(n).add(t)}),e.forEach(t=>{const e=[...t],n=e[0].parentNode,i=document.createElement("blocks");n.insertBefore(i,e[0]),e[0].remove(),e.forEach(t=>i.appendChild(t))})}function D(t){t.querySelectorAll("blocks").forEach(t=>{const e=t.children[0];if(e){let n=e;const i=[...t.children];for(let t=1;t<i.length;t++){const e=i[t];e.remove();const o=document.createElement("next");o.appendChild(e),n.appendChild(o),n=e}e.remove(),t.parentNode.insertBefore(e,t),t.remove()}})}var f=async function(t="toolboxs/default.xml"){const e=await fetch(t).then(t=>t.text()).then(t=>(new DOMParser).parseFromString(t,"text/xml"));D(e);let n=e.querySelectorAll("externals module");return n=[...n].map(t=>t.getAttribute("src")),await Promise.all(n.map(t=>(function(t){if(0!==t.indexOf("/")&&(t=`/toolboxs/${t}`),!document.querySelector(`script[src="${t}"]`)){const e=document.createElement("script"),n=new Promise(t=>{e.onload=(()=>{t(e)})});return e.src=t,document.body.appendChild(e),n}return Promise.resolve()})(t))),{externals:n,toolbox:e.documentElement,toolboxSrc:t}},M=async function(t="index.xml"){0!==t.indexOf("/")&&(t=`/blocks/${t}`),/xml$/.test(t)||(t=`${t}.xml`);const e=await fetch(t).then(t=>t.text()).then(t=>(new DOMParser).parseFromString(t,"text/xml")),n=e.documentElement.getAttribute("toolbox")||"toolboxs/default.xml",{externals:i,toolbox:o}=await f(n),r=Array.from(e.querySelectorAll("preload resource")).map(t=>{if("texture_packer"===t.getAttribute("type")){return[t.getAttribute("texture"),t.getAttribute("data")]}const e=t.getAttribute("src");return{id:t.getAttribute("id")||e,src:e}}),_=[],a=[];let s=_;const T=e.documentElement.children;for(let t=0;t<T.length;t++){const e=T[t];if("script"===e.tagName.toLowerCase()){const t=e.getAttribute("src");if(t){const e=await fetch(t).then(t=>t.text());s.push({code:e,src:t})}}else"block"===e.tagName.toLowerCase()&&(s=a)}return D(e),{externals:i,toolbox:o,toolboxSrc:n,blockXml:e,preload_res:r,scriptsBefore:_,scriptsAfter:a}};function v(t,e=300){let n=null;return function(...i){clearTimeout(n),n=setTimeout(()=>{t.apply(this,i)},e)}}const G=n(0);function y(t,e){let n=t;do{(n=n.getNextBlock())&&n.setCollapsed(e)}while(n)}G.BlockSvg.START_HAT=!0,G.Field.prototype.maxDisplayLength=20;var C=class{constructor(t){"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),this.container=t}async initWorkspace(t){this.workspace&&this.workspace.dispose();const{config:e}=t;delete t.config;const{externals:n,toolbox:i,toolboxSrc:o,blockXml:r,preload_res:_,scriptsBefore:a,scriptsAfter:s}=await M(e);t.toolbox=i,this.toolboxSrc=o,this.preload_res=_,this.externals=n,this.scriptsBefore=a,this.scriptsAfter=s;const T=G.inject(this.container,t);G.Xml.domToWorkspace(r.documentElement,T),T.getAllBlocks().forEach(t=>{t.getParent()||t.isCollapsed()&&y(t,!0)});let l=null;T.addChangeListener(t=>{if(t.type===G.Events.UI&&"click"===t.element){const e=Date.now();if(l&&e-l<=300){l=null;const e=T.getBlockById(t.blockId),n=e.isCollapsed();e.getParent()||y(e,!n),e.setCollapsed(!n)}l=e}if(t.type===G.Events.CHANGE&&"collapsed"===t.element){const e=T.getBlockById(t.blockId);e.getParent()||y(e,t.newValue)}});const E=t=>{if(t instanceof G.Events.Change){const e=t.blockId;let n;t.workspaceId===T.id?n=T.getBlockById(e):T.toolboxWorkspace&&t.workspaceId===T.toolboxWorkspace.id&&(n=T.toolboxWorkspace.getBlockById(e)),n&&n.changed&&(n.oldValue_||(n.oldValue_=t.oldValue),clearTimeout(n.changeIdTimer_),n.changeIdTimer_=setTimeout(()=>{const e=n.oldValue_;delete n.oldValue_,t.oldValue=e,n.changed(t)},500))}else if(t instanceof G.Events.Create){const e=t.blockId;let n;t.workspaceId===T.id?n=T.getBlockById(e):T.toolboxWorkspace&&t.workspaceId===T.toolboxWorkspace.id&&(n=T.toolboxWorkspace.getBlockById(e)),n.created&&n.created(t),n.getAllDescendants().forEach(e=>{e.created&&e.created(t)})}};T.addChangeListener(E);const c=T.toolboxWorkspace;return c&&c.addChangeListener(E),this.workspace=T,T}get xml(){if(!this.workspace)return"";const{workspace:t,preload_res:e,scriptsBefore:n,scriptsAfter:i,toolboxSrc:o,externals:r}=this,_=G.Xml.workspaceToDom(t);h(_);let a=_.innerHTML;if(e){const t=[];e.forEach(e=>{Array.isArray(e)?t.push(`<resource type="texture_packer" texture="${e[0]}" data="${e[1]}"/>`):e.id===e.src?t.push(`<resource type="image" src="${e.src}"/>`):t.push(`<resource type="image" src="${e.src}" id="${e.id}"/>`)}),a=`<preload>${t.join("")}</preload>${a}`}n&&(a=`${n.map(({src:t})=>`<script src="${t}"/>`).join("")}${a}`),i&&(a=`${a}${i.map(({src:t})=>`<script src="${t}"/>`).join("")}`),r&&(a=`<externals>${r.map(t=>`<module src="${t}"/>`).join("")}</externals>${a}`);let s=0;return(a=`<xml toolbox="${o}">${a}</xml>`).replace(/></g,">\n<").split(/\n/g).map(t=>{let e=t;return/^<\//.test(t)&&(s-=2),s>0&&(e=`${new Array(s+1).join(" ")}${t}`),/(<\/\w+>|\/>)$/.test(t)||(s+=2),e}).join("\n")}get code(){if(!this.workspace)return"";const{workspace:t,preload_res:e,scriptsBefore:n,scriptsAfter:i}=this,o=G.Xml.workspaceToDom(t),r=[];s.createFromBlockFields(o),window.LoopTrap=1e7,G.JavaScript.INFINITE_LOOP_TRAP=`${G.Generator.prototype.INDENT}if (--window.LoopTrap == 0) throw "Infinite loop.";\n`,G.JavaScript.init(t);const _=G.JavaScript.workspaceToCode(t);r.push(_),G.JavaScript.INFINITE_LOOP_TRAP=null,e?r.push(`spritly.runtime.scene.preload(...${JSON.stringify(e)})\n  .then(() => spritly.runtime.Signal.send('START', spritly.runtime.scene));\n`):r.push("spritly.runtime.Signal.send('START', spritly.runtime.scene);\n");const a=`/** \n  Generated by spritly ${(new Date).toLocaleString()};\n  Usage: \n  <script src="https://unpkg.com/spritejs/dist/spritejs.min.js"><\/script>\n  <script src="https://unpkg.com/spritly/dist/spritly-runtime.min.js"><\/script>\n  <div id="stage" style="width:100%;height:100%;"></div>\n*/`;return r.unshift(a,"spritly.runtime.use(spritejs);"),n.length&&r.unshift("/* -- external scripts start -- */",...n.map(({code:t})=>t),"/* -- external scripts end -- */"),i.length&&r.push("/* -- external scripts start -- */",...i.map(({code:t})=>t),"/* -- external scripts end -- */"),r.join("\n\n")}};n.d(e,"Blockly",function(){return k}),n.d(e,"Application",function(){return C}),n.d(e,"utils",function(){return i}),n.d(e,"Dropdown",function(){return s});const k=n(0);k.BlockSvg.START_HAT=!0,k.Field.prototype.maxDisplayLength=20,s.addBlockFields("Signals","signal_onevent_send","SIGNAL"),s.addBlockFields("SpriteNames","sprite_create_attrs","NAME"),s.addBlockFields("ListItems","list_foreach","ITEM"),s.addBlockFields("Sprites","signal_new_sprite_as_receiver","ID");const F=k.Block.prototype.dispose;k.Block.prototype.dispose=function(...t){return this.destroyed&&this.destroyed(),F.apply(this,t)},k.Workspace.prototype.getBlocksByType=function(t){return this.getAllBlocks().filter(e=>e.type===t)},Object.defineProperty(k.Workspace.prototype,"toolboxWorkspace",{get(){const t=this.getFlyout_();return t?t.workspace_:null}}),k.Block.prototype.getAllDescendants=function(){return function t(e){const n=e.getChildren();return n?n.reduce((e,n)=>[...e,...t(n)],[e]):[e]}(this).slice(1)}}]);